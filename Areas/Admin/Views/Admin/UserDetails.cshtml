@model TVOnline.Areas.Admin.Models.UserViewModel
@{
    ViewData["Title"] = "Chi tiết người dùng";
}

<div class="container-fluid py-4">
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header pb-0">
                    <div class="d-flex align-items-center">
                        <p class="mb-0">Thông tin người dùng</p>
                        <div class="ms-auto">
                            @if (!Model.Roles.Contains("Admin"))
                            {
                                @if (Model.IsLocked)
                                {
                                    <form method="post" action="@Url.Action("UnlockUser", "Admin", new { area = "Admin", id = Model.Id })" class="d-inline">
                                        <button type="submit" class="btn btn-success btn-sm">Mở khóa tài khoản</button>
                                    </form>
                                }
                                else
                                {
                                    <form method="post" action="@Url.Action("LockUser", "Admin", new { area = "Admin", id = Model.Id })" class="d-inline">
                                        <button type="submit" class="btn btn-warning btn-sm">Khóa tài khoản</button>
                                    </form>
                                }
                            }
                            @if (!Model.EmailConfirmed)
                            {
                                <form method="post" action="@Url.Action("ConfirmEmail", "Admin", new { area = "Admin", id = Model.Id })" class="d-inline">
                                    <button type="submit" class="btn btn-primary btn-sm">Xác nhận email</button>
                                </form>
                            }
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="example-text-input" class="form-control-label">Tên người dùng</label>
                                <input class="form-control" type="text" value="@Model.UserName" readonly>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="example-text-input" class="form-control-label">Email</label>
                                <input class="form-control" type="email" value="@Model.Email" readonly>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="example-text-input" class="form-control-label">Vai trò</label>
                                <div>
                                    @foreach (var role in Model.Roles)
                                    {
                                        <span class="badge bg-gradient-primary">@role</span>
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="example-text-input" class="form-control-label">Trạng thái</label>
                                <div>
                                    @if (Model.IsLocked)
                                    {
                                        <span class="badge bg-gradient-danger">Đã khóa</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-gradient-success">Hoạt động</span>
                                    }
                                    
                                    @if (Model.EmailConfirmed)
                                    {
                                        <span class="badge bg-gradient-success">Email đã xác nhận</span>
                                    }
                                    else
                                    {
                                        <span class="badge bg-gradient-warning">Email chưa xác nhận</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    @if (Model.EmployerDetails != null)
                    {
                        <hr class="horizontal dark">
                        <p class="text-uppercase text-sm">Thông tin nhà tuyển dụng</p>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Tên công ty</label>
                                    <input class="form-control" type="text" value="@Model.EmployerDetails.CompanyName" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Lĩnh vực</label>
                                    <input class="form-control" type="text" value="@Model.EmployerDetails.Field" readonly>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Mô tả</label>
                                    <textarea class="form-control" rows="3" readonly>@Model.EmployerDetails.Description</textarea>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Ngày tạo</label>
                                    <input class="form-control" type="text" value="@Model.EmployerDetails.CreatedAt.ToString("dd/MM/yyyy")" readonly>
                                </div>
                            </div>
                        </div>
                    }

                    @if (Model.JobSeekerDetails != null)
                    {
                        <hr class="horizontal dark">
                        <p class="text-uppercase text-sm">Thông tin người tìm việc</p>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Họ và tên</label>
                                    <input class="form-control" type="text" value="@Model.JobSeekerDetails.FullName" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Số điện thoại</label>
                                    <input class="form-control" type="text" value="@Model.JobSeekerDetails.Phone" readonly>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Địa chỉ</label>
                                    <input class="form-control" type="text" value="@Model.JobSeekerDetails.Address" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="example-text-input" class="form-control-label">Ngày tạo</label>
                                    <input class="form-control" type="text" value="@Model.JobSeekerDetails.CreatedAt.ToString("dd/MM/yyyy")" readonly>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card card-profile">
                <img src="/img/bg-profile.jpg" alt="Image placeholder" class="card-img-top">
                <div class="row justify-content-center">
                    <div class="col-4 col-lg-4 order-lg-2">
                        <div class="mt-n4 mt-lg-n6 mb-4 mb-lg-0">
                            <img src="https://ui-avatars.com/api/?name=@Model.UserName&size=150&background=random" class="rounded-circle img-fluid border border-2 border-white">
                        </div>
                    </div>
                </div>
                <div class="card-body pt-0">
                    <div class="text-center mt-4">
                        <h5>
                            @Model.UserName
                        </h5>
                        <div class="h6 font-weight-300">
                            <i class="ni location_pin mr-2"></i>@Model.Email
                        </div>
                        <div>
                            @foreach (var role in Model.Roles)
                            {
                                <span class="badge bg-gradient-primary">@role</span>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header pb-0">
                    <h6>Hành động</h6>
                </div>
                <div class="card-body px-0 pt-0 pb-2">
                    <div class="p-3">
                        <a href="@Url.Action("ManageUsers", "Admin", new { area = "Admin" })" class="btn btn-secondary">Quay lại danh sách</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
